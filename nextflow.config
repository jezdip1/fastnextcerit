// -------------------------------------------------------------
// Kubernetes executor
// -------------------------------------------------------------
k8s {
  namespace         = 'jezdik-ns'
  storageClaimName  = 'pvc-seg'
  storageMountPath  = '/mnt/data'
  workDir           = '/mnt/data/work'
}

// -------------------------------------------------------------
// Globální executor – potlačíme všechno mimo k8s
// -------------------------------------------------------------
executor {
  name       = 'k8s'
  // kolik procesů může být v "PENDING" stavu, dělá backpressure
  queueSize  = 5
}

// -------------------------------------------------------------
// Výchozí procesy (kontrolní pod) – zajistí, že hlavní pod
// bude také na k8s, ale lehčí
// -------------------------------------------------------------
process {
  executor  = 'k8s'
  container = 'cerit.io/nextflow/nextflow:24.04.4'
  cpus      = 1
  memory    = '4 GB'
}

// -------------------------------------------------------------
// Parametry, nastavíš sem jenom cesty a licenční soubor
// -------------------------------------------------------------
params {
  input_dir = '/mnt/data/input'
  out_dir   = '/mnt/data/subjects'
  license   = '/mnt/data/license.txt'
}
