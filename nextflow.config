params {
    input_dir = '/mnt/data/input'
    license   = '/mnt/data/license.txt'
    out_dir   = '/mnt/data/subjects'      // <─ nový parametr
}

/* Kubernetes */
k8s {
    namespace         = 'jezdik-ns'
    runAsUser         = 1000
    computeResourceType = 'Job'
    storageClaimName  = 'pvc-seg'
    storageMountPath  = '/mnt/data'
    workDir           = '/mnt/data/work'
}

process {
    executor = 'k8s'
    pod = [
      securityContext: [
        runAsUser      : 1000,
        runAsGroup     : 1000,
        fsGroup        : 1000,
        seccompProfile : [ type: 'RuntimeDefault' ]
      ]
    ]

    /* → společné defaulty */
    withLabel: gpujob {
        container = 'jezdip1/fastsurfer-cerit:latest'
        cpus      = 2
        memory    = '12 GiB'

        ext.k8s = [
          limits  : [ cpu: '2', memory: '12Gi', 'nvidia.com/gpu': '1' ],
          requests: [ cpu: '2', memory: '12Gi', 'nvidia.com/gpu': '1' ]
        ]
    }
}
