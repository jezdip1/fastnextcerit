k8s {
  namespace          = 'jezdik-ns'
  computeResourceType = 'Job'

  storageClaimName    = 'pvc-seg'
  storageMountPath    = '/mnt/data'
  workDir             = '/mnt/data/work'
  launchDir           = '/mnt/data/launch'
}

executor {
  name      = 'k8s'
  queueSize = 30          // max. počet paralelních podů
}

params {
  input_dir   = '/mnt/data/input'        // kde leží T1
  license     = '/mnt/data/license.txt'  // FreeSurfer licence
  subjects_dir= '/mnt/data/subjects'     // **ABSOLUTNÍ** kořen výstupu
}

process {
  container = 'jezdip1/fastsurfer-cerit:latest'
  cpus      = 2
  memory    = '12 GB'

  /*
   * GPU profil
   */
  withLabel: gpu {
    ext.k8s = [
      limits   : [ cpu:'2', memory:'12Gi', 'nvidia.com/gpu':'1' ],
      requests : [ cpu:'2', memory:'10Gi', 'nvidia.com/gpu':'1' ]
    ]
  }
}
