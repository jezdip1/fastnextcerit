// -----------------------------
// Kubernetes konfigurace
// -----------------------------
k8s {
  namespace           = 'jezdik-ns'
  runAsUser           = 1000
  computeResourceType = 'Job'
  cpuLimits           = true

  // PVC pro data i workDir
  storageClaimName   = 'pvc-seg'
  storageMountPath   = '/mnt/data'
  launchDir          = '/mnt/data/launch'
  workDir            = '/mnt/data/work'
}

// velikost fronty pro Kubernetes
executor {
  queueSize = 30
}

// výchozí nastavení všech procesů
process {
  executor = 'k8s'

  // pokud nepoužijí ext.k8s (GPU), dostanou tento profil
  cpus   = 1
  memory = '4 GB'

  // bezpečnostní kontejnery
  pod = [
    [ automountServiceAccountToken: false ],
    [ securityContext: [
        runAsNonRoot: true,
        runAsUser: 1000,
        runAsGroup: 1000,
        fsGroup: 1000,
        seccompProfile: [ type: 'RuntimeDefault' ]
      ]]
  ]
}
